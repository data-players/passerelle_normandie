{"ast":null,"code":"import _regeneratorRuntime from \"/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport e from \"final-form-calculate\";\nimport t from \"jsonld\";\nimport { fetchUtils as r, useQueryWithStore as n, Link as o, useReference as a, LinearProgress as i, Datagrid as c, DateField as u, ReferenceField as s, TextField as l, useGetMany as f, ShowButton as p, ReferenceArrayInput as d, TextInput as m, DateTimeInput as y } from \"react-admin\";\nimport h from \"react\";\n\nvar b = function (e) {\n  return {\n    login: function (e) {\n      return Promise.resolve();\n    },\n    logout: function () {\n      localStorage.removeItem(\"token\"), window.location.href = \"\".concat(e, \"auth/logout?global=true\");\n    },\n    checkAuth: function () {\n      if (localStorage.getItem(\"token\")) return Promise.resolve();\n      var t = new URL(window.location);\n      return t.searchParams.has(\"token\") ? (localStorage.setItem(\"token\", t.searchParams.get(\"token\")), t.searchParams.delete(\"token\"), window.location.href = t.toString()) : window.location.href = \"\".concat(e, \"auth?redirectUrl=\") + encodeURI(window.location.href), Promise.resolve();\n    },\n    checkError: function (e) {\n      return Promise.resolve();\n    },\n    getPermissions: function (e) {\n      return Promise.resolve();\n    }\n  };\n};\n\nfunction g(e) {\n  return (g = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (e) {\n    return typeof e;\n  } : function (e) {\n    return e && \"function\" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? \"symbol\" : typeof e;\n  })(e);\n}\n\nfunction v(e, t, r, n, o, a, i) {\n  try {\n    var c = e[a](i),\n        u = c.value;\n  } catch (e) {\n    return void r(e);\n  }\n\n  c.done ? t(u) : Promise.resolve(u).then(n, o);\n}\n\nfunction w(e) {\n  return function () {\n    var t = this,\n        r = arguments;\n    return new Promise(function (n, o) {\n      var a = e.apply(t, r);\n\n      function i(e) {\n        v(a, n, o, i, c, \"next\", e);\n      }\n\n      function c(e) {\n        v(a, n, o, i, c, \"throw\", e);\n      }\n\n      i(void 0);\n    });\n  };\n}\n\nfunction E(e, t, r) {\n  return t in e ? Object.defineProperty(e, t, {\n    value: r,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[t] = r, e;\n}\n\nfunction j() {\n  return (j = Object.assign || function (e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var r = arguments[t];\n\n      for (var n in r) Object.prototype.hasOwnProperty.call(r, n) && (e[n] = r[n]);\n    }\n\n    return e;\n  }).apply(this, arguments);\n}\n\nfunction P(e, t) {\n  var r = Object.keys(e);\n\n  if (Object.getOwnPropertySymbols) {\n    var n = Object.getOwnPropertySymbols(e);\n    t && (n = n.filter(function (t) {\n      return Object.getOwnPropertyDescriptor(e, t).enumerable;\n    })), r.push.apply(r, n);\n  }\n\n  return r;\n}\n\nfunction O(e) {\n  for (var t = 1; t < arguments.length; t++) {\n    var r = null != arguments[t] ? arguments[t] : {};\n    t % 2 ? P(Object(r), !0).forEach(function (t) {\n      E(e, t, r[t]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(r)) : P(Object(r)).forEach(function (t) {\n      Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(r, t));\n    });\n  }\n\n  return e;\n}\n\nfunction S(e, t) {\n  return function (e) {\n    if (Array.isArray(e)) return e;\n  }(e) || function (e, t) {\n    if (\"undefined\" == typeof Symbol || !(Symbol.iterator in Object(e))) return;\n    var r = [],\n        n = !0,\n        o = !1,\n        a = void 0;\n\n    try {\n      for (var i, c = e[Symbol.iterator](); !(n = (i = c.next()).done) && (r.push(i.value), !t || r.length !== t); n = !0);\n    } catch (e) {\n      o = !0, a = e;\n    } finally {\n      try {\n        n || null == c.return || c.return();\n      } finally {\n        if (o) throw a;\n      }\n    }\n\n    return r;\n  }(e, t) || A(e, t) || function () {\n    throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }();\n}\n\nfunction A(e, t) {\n  if (e) {\n    if (\"string\" == typeof e) return k(e, t);\n    var r = Object.prototype.toString.call(e).slice(8, -1);\n    return \"Object\" === r && e.constructor && (r = e.constructor.name), \"Map\" === r || \"Set\" === r ? Array.from(e) : \"Arguments\" === r || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r) ? k(e, t) : void 0;\n  }\n}\n\nfunction k(e, t) {\n  (null == t || t > e.length) && (t = e.length);\n\n  for (var r = 0, n = new Array(t); r < t; r++) n[r] = e[r];\n\n  return n;\n}\n\nfunction x(e) {\n  if (\"undefined\" == typeof Symbol || null == e[Symbol.iterator]) {\n    if (Array.isArray(e) || (e = A(e))) {\n      var t = 0,\n          r = function () {};\n\n      return {\n        s: r,\n        n: function () {\n          return t >= e.length ? {\n            done: !0\n          } : {\n            done: !1,\n            value: e[t++]\n          };\n        },\n        e: function (e) {\n          throw e;\n        },\n        f: r\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var n,\n      o,\n      a = !0,\n      i = !1;\n  return {\n    s: function () {\n      n = e[Symbol.iterator]();\n    },\n    n: function () {\n      var e = n.next();\n      return a = e.done, e;\n    },\n    e: function (e) {\n      i = !0, o = e;\n    },\n    f: function () {\n      try {\n        a || null == n.return || n.return();\n      } finally {\n        if (i) throw o;\n      }\n    }\n  };\n}\n\nvar R = function (t) {\n  for (var r = [], n = 0, o = Object.entries(t); n < o.length; n++) {\n    var a = S(o[n], 2),\n        i = a[0],\n        c = a[1];\n    r.push({\n      field: i,\n      updates: E({}, c, function (e) {\n        return e;\n      })\n    });\n  }\n\n  return e.apply(void 0, r);\n},\n    T = function (e, t) {\n  var r = {};\n  return e.forEach(function (e) {\n    return r[e.prefix] = e.url;\n  }), t ? (delete r[t], [e.find(function (e) {\n    return e.prefix === t;\n  }).context, r]) : r;\n},\n    I = function (e) {\n  var t = e.types,\n      r = e.params,\n      n = r.query,\n      o = r.pagination,\n      a = (r.sort, r.filter),\n      i = e.ontologies,\n      c = \"\";\n  return a.q && a.q.length > 0 && (c += '\\n      {\\n        SELECT ?s1\\n        WHERE {\\n          ?s1 ?p1 ?o1 .\\n          FILTER regex(str(?o1), \"'.concat(a.q, '\")\\n          FILTER NOT EXISTS {?s1 a ?o1}\\n        }\\n      }\\n      ')), n && Object.keys(n).forEach(function (e) {\n    var t = n[e].startsWith(\"http\") ? \"<\".concat(n[e], \">\") : n[e];\n    c += \"?s1 \".concat(e, \" \").concat(t, \" .\");\n  }), \"\\n    \".concat(function (e) {\n    return e.map(function (e) {\n      return \"PREFIX \".concat(e.prefix, \": <\").concat(e.url, \">\");\n    }).join(\"\\n\");\n  }(i), \"\\n    CONSTRUCT { \\n      ?s1 ?p2 ?o2\\n    }\\n    WHERE {\\n      \").concat(c, \"\\n      ?s1 a ?type .\\n      FILTER( ?type IN (\").concat(t.join(\", \"), \") ) .\\n      FILTER( (isIRI(?s1)) ) .\\n      ?s1 ?p2 ?o2 .\\n    }\\n    # TODO try to make pagination work in SPARQL as this doesn't work.\\n    # LIMIT \").concat(o.perPage, \"\\n    # OFFSET \").concat((o.page - 1) * o.perPage, \"\\n  \");\n},\n    C = function (e) {\n  var r,\n      n,\n      o,\n      a,\n      i,\n      c,\n      u = e.sparqlEndpoint,\n      s = e.httpClient,\n      l = e.resources,\n      f = e.ontologies,\n      p = e.mainOntology;\n  return {\n    getList: (c = w(_regeneratorRuntime.mark(function e(r, n) {\n      var o, a, i, c, d, m, y, h, b, g;\n      return _regeneratorRuntime.wrap(function (e) {\n        for (;;) switch (e.prev = e.next) {\n          case 0:\n            if (l[r], !n.id && !n[\"@id\"] && l[r].types) {\n              e.next = 16;\n              break;\n            }\n\n            return o = n.id || n[\"@id\"] || l[r].containerUri, e.next = 5, s(o);\n\n          case 5:\n            if (a = e.sent, i = a.json, c = [\"ldp:contains\", \"as:orderedItems\", \"orderedItems\", \"as:items\", \"items\"].find(function (e) {\n              return i[e];\n            })) {\n              e.next = 11;\n              break;\n            }\n\n            throw new Error(\"Unknown list type\");\n\n          case 11:\n            return d = i[c].map(function (e) {\n              return e.id = e.id || e[\"@id\"], e;\n            }), n.pagination && (d = d.slice((n.pagination.page - 1) * n.pagination.perPage, n.pagination.page * n.pagination.perPage)), e.abrupt(\"return\", {\n              data: d,\n              total: i[c].length\n            });\n\n          case 16:\n            return m = I({\n              types: l[r].types,\n              params: O(O({}, n), {}, {\n                query: l[r].query\n              }),\n              ontologies: f\n            }), e.next = 19, s(u, {\n              method: \"POST\",\n              body: m\n            });\n\n          case 19:\n            return y = e.sent, h = y.json, e.next = 23, t.compact(h, T(f, p));\n\n          case 23:\n            if (b = e.sent, 1 !== Object.keys(b).length) {\n              e.next = 28;\n              break;\n            }\n\n            return e.abrupt(\"return\", {\n              data: [],\n              total: 0\n            });\n\n          case 28:\n            if (b[\"@graph\"]) {\n              e.next = 32;\n              break;\n            }\n\n            return e.abrupt(\"return\", {\n              data: [b],\n              total: 1\n            });\n\n          case 32:\n            return g = b[\"@graph\"].map(function (e) {\n              return e.id = e.id || e[\"@id\"], e;\n            }).slice((n.pagination.page - 1) * n.pagination.perPage, n.pagination.page * n.pagination.perPage), e.abrupt(\"return\", {\n              data: g,\n              total: b[\"@graph\"].length\n            });\n\n          case 34:\n          case \"end\":\n            return e.stop();\n        }\n      }, e);\n    })), function (e, t) {\n      return c.apply(this, arguments);\n    }),\n    getOne: (i = w(_regeneratorRuntime.mark(function e(t, r) {\n      var n, o;\n      return _regeneratorRuntime.wrap(function (e) {\n        for (;;) switch (e.prev = e.next) {\n          case 0:\n            return e.next = 2, s(r.id);\n\n          case 2:\n            return n = e.sent, (o = n.json).id = o.id || o[\"@id\"], e.abrupt(\"return\", {\n              data: o\n            });\n\n          case 6:\n          case \"end\":\n            return e.stop();\n        }\n      }, e);\n    })), function (e, t) {\n      return i.apply(this, arguments);\n    }),\n    getMany: (a = w(_regeneratorRuntime.mark(function e(t, r) {\n      var n, o, a, i, c, u;\n      return _regeneratorRuntime.wrap(function (e) {\n        for (;;) switch (e.prev = e.next) {\n          case 0:\n            n = [], o = x(r.ids), e.prev = 2, o.s();\n\n          case 4:\n            if ((a = o.n()).done) {\n              e.next = 15;\n              break;\n            }\n\n            return i = \"object\" === g(i = a.value) ? i[\"@id\"] : i, e.next = 9, s(i);\n\n          case 9:\n            c = e.sent, (u = c.json).id = u.id || u[\"@id\"], n.push(u);\n\n          case 13:\n            e.next = 4;\n            break;\n\n          case 15:\n            e.next = 20;\n            break;\n\n          case 17:\n            e.prev = 17, e.t0 = e.catch(2), o.e(e.t0);\n\n          case 20:\n            return e.prev = 20, o.f(), e.finish(20);\n\n          case 23:\n            return e.abrupt(\"return\", {\n              data: n\n            });\n\n          case 24:\n          case \"end\":\n            return e.stop();\n        }\n      }, e, null, [[2, 17, 20, 23]]);\n    })), function (e, t) {\n      return a.apply(this, arguments);\n    }),\n    getManyReference: function (e, t) {\n      throw new Error(\"getManyReference is not implemented yet\");\n    },\n    create: (o = w(_regeneratorRuntime.mark(function e(t, r) {\n      var n, o, a, i, c;\n      return _regeneratorRuntime.wrap(function (e) {\n        for (;;) switch (e.prev = e.next) {\n          case 0:\n            return l[t], e.next = 3, s(l[t].containerUri, {\n              method: \"POST\",\n              body: JSON.stringify(O({\n                \"@context\": T(f, p),\n                \"@type\": l[t].types\n              }, r.data))\n            });\n\n          case 3:\n            return n = e.sent, o = n.headers, a = o.get(\"Location\"), e.next = 8, s(a);\n\n          case 8:\n            return i = e.sent, (c = i.json).id = c.id || c[\"@id\"], e.abrupt(\"return\", {\n              data: c\n            });\n\n          case 12:\n          case \"end\":\n            return e.stop();\n        }\n      }, e);\n    })), function (e, t) {\n      return o.apply(this, arguments);\n    }),\n    update: (n = w(_regeneratorRuntime.mark(function e(t, r) {\n      return _regeneratorRuntime.wrap(function (e) {\n        for (;;) switch (e.prev = e.next) {\n          case 0:\n            return e.next = 2, s(r.id, {\n              method: \"PATCH\",\n              body: JSON.stringify(r.data)\n            });\n\n          case 2:\n            return e.abrupt(\"return\", {\n              data: r.data\n            });\n\n          case 3:\n          case \"end\":\n            return e.stop();\n        }\n      }, e);\n    })), function (e, t) {\n      return n.apply(this, arguments);\n    }),\n    updateMany: function (e, t) {\n      throw new Error(\"updateMany is not implemented yet\");\n    },\n    delete: (r = w(_regeneratorRuntime.mark(function e(t, r) {\n      return _regeneratorRuntime.wrap(function (e) {\n        for (;;) switch (e.prev = e.next) {\n          case 0:\n            return e.next = 2, s(r.id, {\n              method: \"DELETE\"\n            });\n\n          case 2:\n            return e.abrupt(\"return\", {\n              data: {\n                id: r.id\n              }\n            });\n\n          case 3:\n          case \"end\":\n            return e.stop();\n        }\n      }, e);\n    })), function (e, t) {\n      return r.apply(this, arguments);\n    }),\n    deleteMany: function (e, t) {\n      throw new Error(\"deleteMany is not implemented yet\");\n    }\n  };\n},\n    L = function (e) {\n  var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};\n\n  switch (t.headers || (t.headers = new Headers()), t.method) {\n    case \"POST\":\n    case \"PATCH\":\n      t.headers.set(\"Accept\", \"application/ld+json\"), t.headers.set(\"Content-Type\", \"application/ld+json\");\n      break;\n\n    case \"DELETE\":\n      break;\n\n    case \"GET\":\n    default:\n      t.headers.set(\"Accept\", \"application/ld+json\");\n  }\n\n  var n = localStorage.getItem(\"token\");\n  return t.headers.set(\"Authorization\", \"Bearer \".concat(n)), r.fetchJson(e, t);\n},\n    D = function (e) {\n  var t = e.children,\n      r = e.source,\n      o = e.record,\n      a = void 0 === o ? {} : o;\n  if (1 !== h.Children.count(t)) throw new Error(\"<ActivitiesList> only accepts a single child\");\n  var i = n({\n    type: \"getList\",\n    resource: \"Activity\",\n    payload: {\n      id: a[r]\n    }\n  }).data;\n  if (!i) return null;\n  var c = i.reduce(function (e, t) {\n    return O(O({}, e), {}, E({}, t.id, t));\n  }, {});\n  return h.cloneElement(t, {\n    resource: \"Activity\",\n    currentSort: {\n      field: \"id\",\n      order: \"ASC\"\n    },\n    data: c,\n    ids: Object.keys(c),\n    basePath: \"/Activity\"\n  });\n},\n    U = function (e) {\n  var t = e.resource,\n      r = e.id,\n      n = e.source,\n      c = e.basePath,\n      u = a({\n    reference: t,\n    id: r\n  }).referenceRecord;\n  return u ? h.createElement(o, {\n    to: \"\".concat(c, \"/\").concat(encodeURIComponent(r))\n  }, u[n]) : h.createElement(i, null);\n},\n    N = function (e) {\n  var t = function (e) {\n    switch (e.type) {\n      case \"Create\":\n        return {\n          description: \"A posté l'actualité\",\n          reference: {\n            resource: \"Note\",\n            id: e.object.id,\n            value: e.object.name,\n            basePath: \"/Note\"\n          }\n        };\n\n      case \"Update\":\n        return {\n          description: \"A mis à jour l'actualité\",\n          reference: {\n            resource: \"Note\",\n            id: e.object.id,\n            value: e.object.name,\n            basePath: \"/Note\"\n          }\n        };\n\n      case \"Delete\":\n        return {\n          description: \"A effacé un objet\"\n        };\n\n      case \"Follow\":\n        return {\n          description: \"A suivi l'action\",\n          reference: {\n            resource: \"Project\",\n            id: e.object,\n            source: \"name\",\n            basePath: \"/Project\"\n          }\n        };\n\n      default:\n        return {\n          description: \"Type d'action inconnu\"\n        };\n    }\n  }(e.record),\n      r = t.description,\n      n = t.reference;\n\n  return h.createElement(\"span\", null, r, \" \", n ? n.value ? h.createElement(o, {\n    to: \"\".concat(n.basePath, \"/\").concat(encodeURIComponent(n.id))\n  }, n.value) : h.createElement(U, n) : null);\n},\n    F = function (e) {\n  return h.createElement(c, e, h.createElement(u, {\n    source: \"published\",\n    showTime: !0,\n    label: \"Date\"\n  }), h.createElement(s, {\n    basePath: \"/Actor\",\n    reference: \"Actor\",\n    source: \"actor\",\n    label: \"Acteur\"\n  }, h.createElement(l, {\n    source: \"name\"\n  })), h.createElement(N, {\n    label: \"Description\"\n  }));\n},\n    M = function (e) {\n  var t = e.ids,\n      r = e.children;\n  if (1 !== h.Children.count(r)) throw new Error(\"<ActorsList> only accepts a single child\");\n  var n = f(\"Actor\", t).data.filter(function (e) {\n    return e;\n  }).reduce(function (e, t) {\n    return O(O({}, e), {}, E({}, t.id, t));\n  }, {});\n  return h.cloneElement(r, {\n    resource: \"Actor\",\n    currentSort: {\n      field: \"id\",\n      order: \"ASC\"\n    },\n    data: n,\n    ids: Object.keys(n),\n    basePath: \"/Actor\"\n  });\n},\n    q = function (e) {\n  var t = e.children,\n      r = e.source,\n      o = e.record,\n      a = n({\n    type: \"getOne\",\n    resource: \"Collection\",\n    payload: {\n      id: o[r]\n    }\n  }).data;\n  return a && a.items.length > 0 ? h.createElement(M, {\n    ids: a.items\n  }, t) : null;\n},\n    H = function (e) {\n  return h.createElement(c, j({\n    rowClick: \"show\"\n  }, e), h.createElement(l, {\n    source: \"name\",\n    label: \"Nom\"\n  }), h.createElement(p, {\n    basePath: \"/Actor\"\n  }));\n},\n    J = function (e) {\n  return \"object\" === g(e) && e[\"@value\"] ? e[\"@value\"] : e;\n},\n    W = function (e) {\n  return h.createElement(d, j({}, e, {\n    format: function (t) {\n      return t ? (Array.isArray(t) || (t = [t]), e.format && (t = e.format(t)), t.map(function (e) {\n        return \"object\" === g(e) ? e.id || e[\"@id\"] : e;\n      })) : t;\n    }\n  }));\n},\n    X = function (e) {\n  return h.createElement(m, j({}, e, {\n    format: function (t) {\n      return \"object\" === g(t) && (t = t[\"@id\"]), e.format && (t = e.format(t)), t;\n    }\n  }));\n},\n    z = function (e) {\n  return h.createElement(y, j({}, e, {\n    format: function (e) {\n      if (e = J(e)) return e.replace(\" \", \"T\");\n    }\n  }));\n},\n    B = function (e) {\n  return h.createElement(\"span\", null, J(e.record[e.source]).replace(\"T\", \" \"));\n},\n    G = function (e) {\n  var t = e.source,\n      r = e.record,\n      n = void 0 === r ? {} : r;\n  return h.createElement(\"span\", null, J(n[t]));\n};\n\nexport { F as ActivitiesGrid, D as ActivitiesList, N as ActivityDescription, H as ActorsGrid, q as CollectionList, B as DateField, z as DateTimeInput, W as JsonLdReferenceInput, G as StringField, X as UriInput, b as authProvider, R as copyValues, C as dataProvider, L as httpClient };","map":{"version":3,"sources":["/app/node_modules/@semapps/react-admin/dist/index.es.js"],"names":["e","t","fetchUtils","r","useQueryWithStore","n","Link","o","useReference","a","LinearProgress","i","Datagrid","c","DateField","u","ReferenceField","s","TextField","l","useGetMany","f","ShowButton","p","ReferenceArrayInput","d","TextInput","m","DateTimeInput","y","h","b","login","Promise","resolve","logout","localStorage","removeItem","window","location","href","concat","checkAuth","getItem","URL","searchParams","has","setItem","get","delete","toString","encodeURI","checkError","getPermissions","g","Symbol","iterator","constructor","prototype","v","value","done","then","w","arguments","apply","E","Object","defineProperty","enumerable","configurable","writable","j","assign","length","hasOwnProperty","call","P","keys","getOwnPropertySymbols","filter","getOwnPropertyDescriptor","push","O","forEach","getOwnPropertyDescriptors","defineProperties","S","Array","isArray","next","return","A","TypeError","k","slice","name","from","test","x","R","entries","field","updates","T","prefix","url","find","context","I","types","params","query","pagination","sort","ontologies","q","startsWith","map","join","perPage","page","C","sparqlEndpoint","httpClient","resources","mainOntology","getList","mark","wrap","prev","id","containerUri","sent","json","Error","abrupt","data","total","method","body","compact","stop","getOne","getMany","ids","t0","catch","finish","getManyReference","create","JSON","stringify","headers","update","updateMany","deleteMany","L","Headers","set","fetchJson","D","children","source","record","Children","count","type","resource","payload","reduce","cloneElement","currentSort","order","basePath","U","reference","referenceRecord","createElement","to","encodeURIComponent","N","description","object","F","showTime","label","M","items","H","rowClick","J","W","format","X","z","replace","B","G","ActivitiesGrid","ActivitiesList","ActivityDescription","ActorsGrid","CollectionList","JsonLdReferenceInput","StringField","UriInput","authProvider","copyValues","dataProvider"],"mappings":"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","sourcesContent":["import e from\"final-form-calculate\";import t from\"jsonld\";import{fetchUtils as r,useQueryWithStore as n,Link as o,useReference as a,LinearProgress as i,Datagrid as c,DateField as u,ReferenceField as s,TextField as l,useGetMany as f,ShowButton as p,ReferenceArrayInput as d,TextInput as m,DateTimeInput as y}from\"react-admin\";import h from\"react\";var b=function(e){return{login:function(e){return Promise.resolve()},logout:function(){localStorage.removeItem(\"token\"),window.location.href=\"\".concat(e,\"auth/logout?global=true\")},checkAuth:function(){if(localStorage.getItem(\"token\"))return Promise.resolve();var t=new URL(window.location);return t.searchParams.has(\"token\")?(localStorage.setItem(\"token\",t.searchParams.get(\"token\")),t.searchParams.delete(\"token\"),window.location.href=t.toString()):window.location.href=\"\".concat(e,\"auth?redirectUrl=\")+encodeURI(window.location.href),Promise.resolve()},checkError:function(e){return Promise.resolve()},getPermissions:function(e){return Promise.resolve()}}};function g(e){return(g=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function v(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function w(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){v(a,n,o,i,c,\"next\",e)}function c(e){v(a,n,o,i,c,\"throw\",e)}i(void 0)}))}}function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j(){return(j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(\"undefined\"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw a}}return r}(e,t)||A(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function A(e,t){if(e){if(\"string\"==typeof e)return k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===r&&e.constructor&&(r=e.constructor.name),\"Map\"===r||\"Set\"===r?Array.from(e):\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?k(e,t):void 0}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function x(e){if(\"undefined\"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=A(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var n,o,a=!0,i=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(i)throw o}}}}var R=function(t){for(var r=[],n=0,o=Object.entries(t);n<o.length;n++){var a=S(o[n],2),i=a[0],c=a[1];r.push({field:i,updates:E({},c,(function(e){return e}))})}return e.apply(void 0,r)},T=function(e,t){var r={};return e.forEach((function(e){return r[e.prefix]=e.url})),t?(delete r[t],[e.find((function(e){return e.prefix===t})).context,r]):r},I=function(e){var t=e.types,r=e.params,n=r.query,o=r.pagination,a=(r.sort,r.filter),i=e.ontologies,c=\"\";return a.q&&a.q.length>0&&(c+='\\n      {\\n        SELECT ?s1\\n        WHERE {\\n          ?s1 ?p1 ?o1 .\\n          FILTER regex(str(?o1), \"'.concat(a.q,'\")\\n          FILTER NOT EXISTS {?s1 a ?o1}\\n        }\\n      }\\n      ')),n&&Object.keys(n).forEach((function(e){var t=n[e].startsWith(\"http\")?\"<\".concat(n[e],\">\"):n[e];c+=\"?s1 \".concat(e,\" \").concat(t,\" .\")})),\"\\n    \".concat(function(e){return e.map((function(e){return\"PREFIX \".concat(e.prefix,\": <\").concat(e.url,\">\")})).join(\"\\n\")}(i),\"\\n    CONSTRUCT { \\n      ?s1 ?p2 ?o2\\n    }\\n    WHERE {\\n      \").concat(c,\"\\n      ?s1 a ?type .\\n      FILTER( ?type IN (\").concat(t.join(\", \"),\") ) .\\n      FILTER( (isIRI(?s1)) ) .\\n      ?s1 ?p2 ?o2 .\\n    }\\n    # TODO try to make pagination work in SPARQL as this doesn't work.\\n    # LIMIT \").concat(o.perPage,\"\\n    # OFFSET \").concat((o.page-1)*o.perPage,\"\\n  \")},C=function(e){var r,n,o,a,i,c,u=e.sparqlEndpoint,s=e.httpClient,l=e.resources,f=e.ontologies,p=e.mainOntology;return{getList:(c=w(regeneratorRuntime.mark((function e(r,n){var o,a,i,c,d,m,y,h,b,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l[r],!n.id&&!n[\"@id\"]&&l[r].types){e.next=16;break}return o=n.id||n[\"@id\"]||l[r].containerUri,e.next=5,s(o);case 5:if(a=e.sent,i=a.json,c=[\"ldp:contains\",\"as:orderedItems\",\"orderedItems\",\"as:items\",\"items\"].find((function(e){return i[e]}))){e.next=11;break}throw new Error(\"Unknown list type\");case 11:return d=i[c].map((function(e){return e.id=e.id||e[\"@id\"],e})),n.pagination&&(d=d.slice((n.pagination.page-1)*n.pagination.perPage,n.pagination.page*n.pagination.perPage)),e.abrupt(\"return\",{data:d,total:i[c].length});case 16:return m=I({types:l[r].types,params:O(O({},n),{},{query:l[r].query}),ontologies:f}),e.next=19,s(u,{method:\"POST\",body:m});case 19:return y=e.sent,h=y.json,e.next=23,t.compact(h,T(f,p));case 23:if(b=e.sent,1!==Object.keys(b).length){e.next=28;break}return e.abrupt(\"return\",{data:[],total:0});case 28:if(b[\"@graph\"]){e.next=32;break}return e.abrupt(\"return\",{data:[b],total:1});case 32:return g=b[\"@graph\"].map((function(e){return e.id=e.id||e[\"@id\"],e})).slice((n.pagination.page-1)*n.pagination.perPage,n.pagination.page*n.pagination.perPage),e.abrupt(\"return\",{data:g,total:b[\"@graph\"].length});case 34:case\"end\":return e.stop()}}),e)}))),function(e,t){return c.apply(this,arguments)}),getOne:(i=w(regeneratorRuntime.mark((function e(t,r){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(r.id);case 2:return n=e.sent,(o=n.json).id=o.id||o[\"@id\"],e.abrupt(\"return\",{data:o});case 6:case\"end\":return e.stop()}}),e)}))),function(e,t){return i.apply(this,arguments)}),getMany:(a=w(regeneratorRuntime.mark((function e(t,r){var n,o,a,i,c,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],o=x(r.ids),e.prev=2,o.s();case 4:if((a=o.n()).done){e.next=15;break}return i=\"object\"===g(i=a.value)?i[\"@id\"]:i,e.next=9,s(i);case 9:c=e.sent,(u=c.json).id=u.id||u[\"@id\"],n.push(u);case 13:e.next=4;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),o.e(e.t0);case 20:return e.prev=20,o.f(),e.finish(20);case 23:return e.abrupt(\"return\",{data:n});case 24:case\"end\":return e.stop()}}),e,null,[[2,17,20,23]])}))),function(e,t){return a.apply(this,arguments)}),getManyReference:function(e,t){throw new Error(\"getManyReference is not implemented yet\")},create:(o=w(regeneratorRuntime.mark((function e(t,r){var n,o,a,i,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l[t],e.next=3,s(l[t].containerUri,{method:\"POST\",body:JSON.stringify(O({\"@context\":T(f,p),\"@type\":l[t].types},r.data))});case 3:return n=e.sent,o=n.headers,a=o.get(\"Location\"),e.next=8,s(a);case 8:return i=e.sent,(c=i.json).id=c.id||c[\"@id\"],e.abrupt(\"return\",{data:c});case 12:case\"end\":return e.stop()}}),e)}))),function(e,t){return o.apply(this,arguments)}),update:(n=w(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(r.id,{method:\"PATCH\",body:JSON.stringify(r.data)});case 2:return e.abrupt(\"return\",{data:r.data});case 3:case\"end\":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)}),updateMany:function(e,t){throw new Error(\"updateMany is not implemented yet\")},delete:(r=w(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(r.id,{method:\"DELETE\"});case 2:return e.abrupt(\"return\",{data:{id:r.id}});case 3:case\"end\":return e.stop()}}),e)}))),function(e,t){return r.apply(this,arguments)}),deleteMany:function(e,t){throw new Error(\"deleteMany is not implemented yet\")}}},L=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.headers||(t.headers=new Headers),t.method){case\"POST\":case\"PATCH\":t.headers.set(\"Accept\",\"application/ld+json\"),t.headers.set(\"Content-Type\",\"application/ld+json\");break;case\"DELETE\":break;case\"GET\":default:t.headers.set(\"Accept\",\"application/ld+json\")}var n=localStorage.getItem(\"token\");return t.headers.set(\"Authorization\",\"Bearer \".concat(n)),r.fetchJson(e,t)},D=function(e){var t=e.children,r=e.source,o=e.record,a=void 0===o?{}:o;if(1!==h.Children.count(t))throw new Error(\"<ActivitiesList> only accepts a single child\");var i=n({type:\"getList\",resource:\"Activity\",payload:{id:a[r]}}).data;if(!i)return null;var c=i.reduce((function(e,t){return O(O({},e),{},E({},t.id,t))}),{});return h.cloneElement(t,{resource:\"Activity\",currentSort:{field:\"id\",order:\"ASC\"},data:c,ids:Object.keys(c),basePath:\"/Activity\"})},U=function(e){var t=e.resource,r=e.id,n=e.source,c=e.basePath,u=a({reference:t,id:r}).referenceRecord;return u?h.createElement(o,{to:\"\".concat(c,\"/\").concat(encodeURIComponent(r))},u[n]):h.createElement(i,null)},N=function(e){var t=function(e){switch(e.type){case\"Create\":return{description:\"A posté l'actualité\",reference:{resource:\"Note\",id:e.object.id,value:e.object.name,basePath:\"/Note\"}};case\"Update\":return{description:\"A mis à jour l'actualité\",reference:{resource:\"Note\",id:e.object.id,value:e.object.name,basePath:\"/Note\"}};case\"Delete\":return{description:\"A effacé un objet\"};case\"Follow\":return{description:\"A suivi l'action\",reference:{resource:\"Project\",id:e.object,source:\"name\",basePath:\"/Project\"}};default:return{description:\"Type d'action inconnu\"}}}(e.record),r=t.description,n=t.reference;return h.createElement(\"span\",null,r,\" \",n?n.value?h.createElement(o,{to:\"\".concat(n.basePath,\"/\").concat(encodeURIComponent(n.id))},n.value):h.createElement(U,n):null)},F=function(e){return h.createElement(c,e,h.createElement(u,{source:\"published\",showTime:!0,label:\"Date\"}),h.createElement(s,{basePath:\"/Actor\",reference:\"Actor\",source:\"actor\",label:\"Acteur\"},h.createElement(l,{source:\"name\"})),h.createElement(N,{label:\"Description\"}))},M=function(e){var t=e.ids,r=e.children;if(1!==h.Children.count(r))throw new Error(\"<ActorsList> only accepts a single child\");var n=f(\"Actor\",t).data.filter((function(e){return e})).reduce((function(e,t){return O(O({},e),{},E({},t.id,t))}),{});return h.cloneElement(r,{resource:\"Actor\",currentSort:{field:\"id\",order:\"ASC\"},data:n,ids:Object.keys(n),basePath:\"/Actor\"})},q=function(e){var t=e.children,r=e.source,o=e.record,a=n({type:\"getOne\",resource:\"Collection\",payload:{id:o[r]}}).data;return a&&a.items.length>0?h.createElement(M,{ids:a.items},t):null},H=function(e){return h.createElement(c,j({rowClick:\"show\"},e),h.createElement(l,{source:\"name\",label:\"Nom\"}),h.createElement(p,{basePath:\"/Actor\"}))},J=function(e){return\"object\"===g(e)&&e[\"@value\"]?e[\"@value\"]:e},W=function(e){return h.createElement(d,j({},e,{format:function(t){return t?(Array.isArray(t)||(t=[t]),e.format&&(t=e.format(t)),t.map((function(e){return\"object\"===g(e)?e.id||e[\"@id\"]:e}))):t}}))},X=function(e){return h.createElement(m,j({},e,{format:function(t){return\"object\"===g(t)&&(t=t[\"@id\"]),e.format&&(t=e.format(t)),t}}))},z=function(e){return h.createElement(y,j({},e,{format:function(e){if(e=J(e))return e.replace(\" \",\"T\")}}))},B=function(e){return h.createElement(\"span\",null,J(e.record[e.source]).replace(\"T\",\" \"))},G=function(e){var t=e.source,r=e.record,n=void 0===r?{}:r;return h.createElement(\"span\",null,J(n[t]))};export{F as ActivitiesGrid,D as ActivitiesList,N as ActivityDescription,H as ActorsGrid,q as CollectionList,B as DateField,z as DateTimeInput,W as JsonLdReferenceInput,G as StringField,X as UriInput,b as authProvider,R as copyValues,C as dataProvider,L as httpClient};\n"]},"metadata":{},"sourceType":"module"}