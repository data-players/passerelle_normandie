{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nvar __spreadArrays = this && this.__spreadArrays || function () {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) r[k] = a[j];\n\n  return r;\n};\n\nimport useDataProvider from './useDataProvider';\nimport { useMemo } from 'react';\nimport useDeclarativeSideEffects from './useDeclarativeSideEffects';\nimport { getDataProviderCallArguments } from './getDataProviderCallArguments';\n/**\n * This version of the useDataProvider hook ensure Query and Mutation components are still usable\n * with side effects declared as objects.\n *\n * @deprecated This is for backward compatibility only and will be removed in next major version.\n */\n\nvar useDataProviderWithDeclarativeSideEffects = function () {\n  var dataProvider = useDataProvider();\n  var getSideEffects = useDeclarativeSideEffects(); // @ts-ignore\n\n  var dataProviderProxy = useMemo(function () {\n    return new Proxy(dataProvider, {\n      get: function (target, name) {\n        if (typeof name === 'symbol') {\n          return;\n        }\n\n        return function () {\n          var args = [];\n\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n\n          var _a = getDataProviderCallArguments(args),\n              resource = _a.resource,\n              payload = _a.payload,\n              allArguments = _a.allArguments,\n              options = _a.options;\n\n          var onSuccess;\n          var onFailure;\n          var finalOptions = options;\n          var finalAllArguments = allArguments;\n\n          if (Object.keys(options).some(function (key) {\n            return ['onSuccess', 'onFailure'].includes(key);\n          })) {\n            var sideEffect = getSideEffects(resource, options);\n\n            var ignoreOnSuccess = options.onSuccess,\n                // Used to extract options without onSuccess\n            ignoreOnFailure = options.onFailure,\n                // Used to extract options without onFailure\n            otherOptions = __rest(options, [\"onSuccess\", \"onFailure\"]);\n\n            onSuccess = sideEffect.onSuccess;\n            onFailure = sideEffect.onFailure;\n            finalOptions = otherOptions;\n            finalAllArguments = __spreadArrays(args).slice(0, args.length - 1);\n          }\n\n          try {\n            return target[name.toString()].apply(target, typeof resource === 'string' ? [resource, payload, __assign(__assign({}, finalOptions), {\n              onSuccess: onSuccess,\n              onFailure: onFailure\n            })] : finalAllArguments);\n          } catch (e) {\n            // turn synchronous exceptions (e.g. in parameter preparation)\n            // into async ones, otherwise they'll be lost\n            return Promise.reject(e);\n          }\n        };\n      }\n    });\n  }, [dataProvider, getSideEffects]);\n  return dataProviderProxy;\n};\n\nexport default useDataProviderWithDeclarativeSideEffects;","map":{"version":3,"sources":["/app/node_modules/ra-core/esm/dataProvider/useDataProviderWithDeclarativeSideEffects.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__spreadArrays","il","r","Array","k","a","j","jl","useDataProvider","useMemo","useDeclarativeSideEffects","getDataProviderCallArguments","useDataProviderWithDeclarativeSideEffects","dataProvider","getSideEffects","dataProviderProxy","Proxy","get","target","name","args","_i","_a","resource","payload","allArguments","options","onSuccess","onFailure","finalOptions","finalAllArguments","keys","some","key","includes","sideEffect","ignoreOnSuccess","ignoreOnFailure","otherOptions","slice","toString","Promise","reject"],"mappings":"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","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nimport useDataProvider from './useDataProvider';\nimport { useMemo } from 'react';\nimport useDeclarativeSideEffects from './useDeclarativeSideEffects';\nimport { getDataProviderCallArguments } from './getDataProviderCallArguments';\n/**\n * This version of the useDataProvider hook ensure Query and Mutation components are still usable\n * with side effects declared as objects.\n *\n * @deprecated This is for backward compatibility only and will be removed in next major version.\n */\nvar useDataProviderWithDeclarativeSideEffects = function () {\n    var dataProvider = useDataProvider();\n    var getSideEffects = useDeclarativeSideEffects();\n    // @ts-ignore\n    var dataProviderProxy = useMemo(function () {\n        return new Proxy(dataProvider, {\n            get: function (target, name) {\n                if (typeof name === 'symbol') {\n                    return;\n                }\n                return function () {\n                    var args = [];\n                    for (var _i = 0; _i < arguments.length; _i++) {\n                        args[_i] = arguments[_i];\n                    }\n                    var _a = getDataProviderCallArguments(args), resource = _a.resource, payload = _a.payload, allArguments = _a.allArguments, options = _a.options;\n                    var onSuccess;\n                    var onFailure;\n                    var finalOptions = options;\n                    var finalAllArguments = allArguments;\n                    if (Object.keys(options).some(function (key) {\n                        return ['onSuccess', 'onFailure'].includes(key);\n                    })) {\n                        var sideEffect = getSideEffects(resource, options);\n                        var ignoreOnSuccess = options.onSuccess, // Used to extract options without onSuccess\n                        ignoreOnFailure = options.onFailure, // Used to extract options without onFailure\n                        otherOptions = __rest(options, [\"onSuccess\", \"onFailure\"]);\n                        onSuccess = sideEffect.onSuccess;\n                        onFailure = sideEffect.onFailure;\n                        finalOptions = otherOptions;\n                        finalAllArguments = __spreadArrays(args).slice(0, args.length - 1);\n                    }\n                    try {\n                        return target[name.toString()].apply(target, typeof resource === 'string'\n                            ? [\n                                resource,\n                                payload,\n                                __assign(__assign({}, finalOptions), { onSuccess: onSuccess,\n                                    onFailure: onFailure }),\n                            ]\n                            : finalAllArguments);\n                    }\n                    catch (e) {\n                        // turn synchronous exceptions (e.g. in parameter preparation)\n                        // into async ones, otherwise they'll be lost\n                        return Promise.reject(e);\n                    }\n                };\n            },\n        });\n    }, [dataProvider, getSideEffects]);\n    return dataProviderProxy;\n};\nexport default useDataProviderWithDeclarativeSideEffects;\n"]},"metadata":{},"sourceType":"module"}